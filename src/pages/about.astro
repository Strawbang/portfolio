---
import BaseLayout from "../layouts/BaseLayout.astro";
import ContactCTA from "../components/ContactCTA.astro";
import Hero from "../components/Hero.astro";
import Icon from "../components/Icon.astro";
import CallToAction from "../components/CallToAction.astro";
import { Schema } from 'astro-seo-schema';
import { experiences, education, skills, spokenLanguages, contact, resumeFiles, aboutLabels } from '../data/about';

const l = aboutLabels['en'];
const resume = resumeFiles['en'];
---

<BaseLayout title={l.metaTitle} description={l.metaDescription}>
  <div class="stack gap-20">
    <main class="wrapper about">
      <Hero title={l.title} tagline={l.tagline}>
        <img width="1553" height="873" src="/assets/at-work.jpg" alt={l.imgAlt} />
      </Hero>

      <section class="section-container">
        <h2 class="section-title">{l.sectionBackground}</h2>
        <div class="content">
          <p>{l.backgroundIntro}</p>
          {experiences.map(exp => (
            <div class="experience-item">
              <h3>{exp.company}</h3>
              <p class="experience-meta">{exp.role['en']} | {exp.period['en']}</p>
              <p>{exp.description['en']}</p>
            </div>
          ))}
          <p>{l.backgroundOutro}</p>
        </div>
      </section>

      <section class="section-container">
        <h2 class="section-title">{l.sectionEducation}</h2>
        <div class="content">
          {education.map(edu => (
            <div class="education-item">
              <h3>{edu.degree['en']}</h3>
              <p class="education-meta">{edu.field['en']} | {edu.period}</p>
              <p>{edu.institution}</p>
              <p class="education-skills">{edu.skills}</p>
            </div>
          ))}
        </div>
      </section>

      <section class="section-container">
        <h2 class="section-title">{l.sectionSkills}</h2>
        <div class="content">
          <div class="skills-grid">
            <div class="skill-category">
              <h3><Icon icon="code" size="1.33em" /> {l.skillFrontend}</h3>
              <ul class="skill-list">{skills.frontend.map(s => <li>{s}</li>)}</ul>
            </div>
            <div class="skill-category">
              <h3><Icon icon="terminal-window" size="1.33em" /> {l.skillBackend}</h3>
              <ul class="skill-list">{skills.backend.map(s => <li>{s}</li>)}</ul>
            </div>
            <div class="skill-category">
              <h3><Icon icon="rocket-launch" size="1.33em" /> {l.skillAi}</h3>
              <ul class="skill-list">{skills.ai.map(s => <li>{s}</li>)}</ul>
            </div>
            <div class="skill-category">
              <h3><Icon icon="devops-logo" size="1.33em" /> {l.skillDevops}</h3>
              <ul class="skill-list">{skills.devops.map(s => <li>{s}</li>)}</ul>
            </div>
            <div class="skill-category">
              <h3><Icon icon="strategy" size="1.33em" /> {l.skillMethodologies}</h3>
              <ul class="skill-list">{skills.methodologies.map(s => <li>{s}</li>)}</ul>
            </div>
            <div class="skill-category">
              <h3><Icon icon="pencil-line" size="1.33em" /> {l.skillArchitecture}</h3>
              <ul class="skill-list">{skills.architecture.map(s => <li>{s}</li>)}</ul>
            </div>
            <div class="skill-category">
              <h3><Icon icon="github-logo" size="1.33em" /> {l.skillTools}</h3>
              <ul class="skill-list">{skills.tools.map(s => <li>{s}</li>)}</ul>
            </div>
          </div>
        </div>
      </section>

      <section class="section-container">
        <h2 class="section-title">{l.sectionLanguages}</h2>
        <div class="content">
          <div class="languages-grid">
            {spokenLanguages.map(sl => (
              <div class="language-item">
                <h3>{sl.name}</h3>
                <p>{sl.level['en']}</p>
              </div>
            ))}
          </div>
        </div>
      </section>

      <section class="section-container">
        <h2 class="section-title">{l.sectionContact}</h2>
        <div class="content">
          <div class="contact-grid">
            <div class="contact-item">
              <h3><Icon icon="paper-plane-tilt" size="1.33em" /> Email</h3>
              <p><a href={`mailto:${contact.email}`}>{contact.email}</a></p>
            </div>
            <div class="contact-item">
              <h3><Icon icon="desktop" size="1.33em" /> Phone</h3>
              <p><a href={`tel:${contact.phone}`}>{contact.phone}</a></p>
            </div>
            <div class="contact-item">
              <h3><Icon icon="linkedin-logo" size="1.33em" /> LinkedIn</h3>
              <p><a href={contact.linkedin} target="_blank">{contact.linkedin.replace('https://', '')}</a></p>
            </div>
            <div class="contact-item">
              <h3><Icon icon="github-logo" size="1.33em" /> GitHub</h3>
              <p><a href={contact.github} target="_blank">{contact.github.replace('https://', '')}</a></p>
            </div>
            <div class="contact-item">
              <h3><Icon icon="rocket-launch" size="1.33em" /> Portfolio</h3>
              <p><a href={contact.portfolio} target="_blank">{contact.portfolio.replace('https://', '')}</a></p>
            </div>
          </div>
        </div>
      </section>

      <section class="section-container">
        <h2 class="section-title">{l.sectionResume}</h2>
        <div class="content">
          <p>{l.resumeText}</p>
          <CallToAction href={resume}>
            {l.resumeDownload}
            <Icon icon="arrow-right" size="1.2em" />
          </CallToAction>
        </div>
      </section>
    </main>

    <ContactCTA />
  </div>

  <Schema
    item={{
      "@context": "https://schema.org",
      "@type": "Person",
      name: "Djamel Bougouffa",
      jobTitle: "Full-Stack Software Engineer",
      description: "Full-Stack Software Engineer with over 5 years of experience specializing in TypeScript, React, Node.js, DevOps, and AI/GenAI. Currently at Ippon Technologies, building AI-driven legacy modernization tools in Rust with RAG, Tree-sitter, and Model Context Protocol (MCP).",
      image: "https://djamel-bougouffa.com/assets/at-work.jpg",
      url: "https://djamel-bougouffa.com/about/",
      email: contact.email,
      telephone: contact.phone,
      sameAs: [contact.github, contact.linkedin, "https://twitter.com/strawbang", "https://dev.to/strawbang", "https://medium.com/@strawbang"],
      knowsLanguage: ["en", "fr"],
      workLocation: { "@type": "Place", name: "Paris, France" },
      worksFor: { "@type": "Organization", name: "Ippon Technologies", url: "https://www.ippon.fr/" },
      skills: ["TypeScript", "React", "Node.js", "Rust", "RAG", "GenAI", "MCP", "LLM Integration", "DevOps", "Docker", "Kubernetes", "Next.js"],
      seeks: { "@type": "Demand", description: "Open to new opportunities as a Full-Stack Software Engineer with expertise in AI/GenAI, Rust, RAG, and legacy modernization" },
      availableForHire: true
    }}
  />
</BaseLayout>

<style>
  .about {
    display: flex;
    flex-direction: column;
    gap: 3.5rem;
  }

  img {
    margin-top: 1.5rem;
    border-radius: 1.5rem;
    box-shadow: var(--shadow-md);
  }

  .section-container {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    color: var(--gray-200);
    margin-bottom: 2rem;
  }

  .section-title {
    grid-column-start: 1;
    font-size: var(--text-xl);
    color: var(--gray-0);
    margin-bottom: 1rem;
    border-bottom: 1px solid var(--gray-800);
    padding-bottom: 0.5rem;
  }

  .content {
    grid-column: 2 / 4;
  }

  .content h3 {
    color: var(--accent-regular);
    font-size: var(--text-lg);
    margin-bottom: 0.5rem;
  }

  .experience-item, .education-item {
    margin-bottom: 1.5rem;
    padding-left: 1rem;
    border-left: 2px solid var(--accent-regular);
  }

  .experience-meta, .education-meta {
    font-style: italic;
    color: var(--gray-300);
    margin-bottom: 0.5rem;
  }

  .skills-grid, .languages-grid, .contact-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 1.5rem;
  }

  .skill-category, .language-item, .contact-item {
    background-color: var(--gray-999);
    border-radius: 0.5rem;
    padding: 1rem;
    box-shadow: var(--shadow-sm);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }

  .skill-category:hover, .language-item:hover, .contact-item:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-md);
  }

  .skill-list {
    list-style-type: none;
    padding: 0;
    margin: 0.5rem 0 0 0;
  }

  .skill-list li {
    margin-bottom: 0.25rem;
    padding-left: 1rem;
    position: relative;
  }

  .skill-list li::before {
    content: "â€¢";
    position: absolute;
    left: 0;
    color: var(--accent-regular);
  }

  .content :global(a) {
    text-decoration: 1px solid underline transparent;
    text-underline-offset: 0.25em;
    transition: text-decoration-color var(--theme-transition);
  }

  .content :global(a:hover),
  .content :global(a:focus) {
    text-decoration-color: currentColor;
  }

  @media (min-width: 50em) {
    .about {
      display: grid;
      grid-template-columns: 1fr 60% 1fr;
    }

    .about > :global(:first-child) {
      grid-column-start: 2;
    }

    .section-container {
      display: contents;
      font-size: var(--text-lg);
    }
  }

  @media (max-width: 50em) {
    .skills-grid, .languages-grid, .contact-grid {
      grid-template-columns: 1fr;
    }
  }
</style>
